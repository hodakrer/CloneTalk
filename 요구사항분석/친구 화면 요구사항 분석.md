# 미션 3 - 안드로이드 친구 화면 개발

![친구목록.png](https://github.com/hodakrer/images/blob/0cfd74dcec5b64cb066d7362c713453675e2293b/%EC%B9%9C%EA%B5%AC%ED%99%94%EB%A9%B4.png)


## 1. 요구분석

- UI와 기능, 연결된 서버 제작.
- UI:
    - 남색 1: 앱바. 투명색.
    - 남색 2: 내 프로필 아이템.
    - 남색 3: 이미지 알림/ 광고.
    - 남색 4: 아코디언 메뉴, 리사이클러뷰를 포함한 영역.
    
    - 하늘 1: Fragment 이름 텍스트.
    - ☆: 내 프로필 아이템도 하늘 1 하단에 상태 메시지 텍스트 넣을 수 있다.
    - 하늘 2: 검색 버튼.
    - 하늘 3: 친구 추가 버튼.
    - 하늘 4: 음악 버튼.
    - 하늘 5: 해당 Fragment의 설정 버튼. → 편집|친구 관리| 전체 설정.
        - 편집: 친구 리사이클러뷰만 띄움. 친구 아이템 숨김.
            - 존재하는 친구 검색 화면.
            - 친구 프로필 아이템 오른쪽에 숨김 버튼.
        - 친구 관리:
            - 친구 추가
            - 숨김/차단 친구 관리
                - 친구 리사이클러뷰로 복귀
                - 숨김↔차단
                - 친구 삭제
        - 전체 설정: 전체 설정 Fragment로 이동.
    - 하늘 6: 사용자 프로필 이미지
        - (클릭 시) 프로필 Overlay Fragment 부르기.
    - 하늘 7: 사용자 별명 텍스트
    - 하늘 8: 멀티프로필 전환 버튼
    
    - 초록 1: 아코디언 메뉴/ Expansion Panel
    - 초록 2: 이하 동문
    - 초록 3: 이하 동문
    - 초로 4: 이하 동문
    - 초록 5: 진짜 버튼이 아니라 ‘접을 수 있다’는 이미지.
        - 접는 것 자체는 해당 아이템 버튼을 누른다.
    
    - 빨강 1: 친구 프로필 이미지
    - 빨강 2: 친구 별명 텍스트
    - 빨강 3: 친구 상태 메시지
- 안드로이드 기능:
    - 원본
        - 남색 1: 앱바. → 투명색 처리할 것.
        - 남색 2: 친구 프로필 아이템을 그냥 갖다 쓰자. 세로 크기만 따로 넓힌다.
        - 남색 3: 서버에 알림/광고 이미지 요청 → (용량문제/썸네일) → 이미지 받아서 화면에 표시.
        - 남색 4: 아코디언 메뉴 n 개 생성할 것. 그리고 맨 밑 아코디언 메뉴는 친구 리사이클러 표시.
        
        - 하늘 1: Fragment 이름 텍스트
            - 멀티 언어 문제?
            - 텍스트 사이즈?
        - 하늘 2:
            - 기존 친구 검색 버튼 onClickListener
            - → 검색 오버레이 프레그먼트 띄우기.
        - 하늘 3: 친구 추가 버튼.
            - 새 친구 추가 버튼 onClickListener
            - → 친구 추가 오버레이 프레그먼트 띄우기.
        - 하늘 4: 음악 버튼.
            - 다른 화면 위에 표시 허락 여부 체크
            - → (없으면 허락 여부 설정 화면 띄우기)
            - → 카카오뮤직 연결.
        - 하늘 5: 해당 친구 Fragment의 설정 버튼. → 편집|친구 관리| 전체 설정.
            - 편집: 클릭 시 친구 편집 overlay 프래그먼트 띄우기.
            - 친구 클릭 시 overlay 프래그먼트 띄우기
            - 전체 설정: 클릭 시 전체 설정 Fragment로 이동.
            - ☆: 오버레이 vs 일반 프래그먼트 선택 기준이란?
                - 오버레이:
                    - 빠른 화면전환.
                    - 리사이클러뷰 순서나 광고 유지.
                    - 리소스 문제.
                - 일반:
                    - 비교적 느린 화면전환.
                    - 리사이클러뷰 순서 따로 저장해야한다.
                    - 리소스 문제 자유로움.
        - 하늘 6: 사용자 프로필 이미지
            - 클릭 시 프로필 Overlay 프래그먼트 부르기.
        - 하늘 7: 사용자 별명 텍스트 + 상태 메시지 텍스트
            - 아이템 생성 시 별명 텍스트, 메시지 텍스트 요청 → 받아서 띄우기.
            - error난 경우 어떻게 처리?
        - 하늘 8: 멀티프로필 전환 버튼
            - 클릭 시 멀티프로필 전환 overlay 프래그먼트 부르기.
        - 초록 1: 아코디언 메뉴/ Expansion Panel
        - 초록 2: 이하 동문
        - 초록 3: 이하 동문
        - 초로 4: 이하 동문
        - 초록 5: 진짜 버튼이 아니라 ‘접을 수 있다’는 이미지.
            - 접는 것 자체는 해당 아이템 버튼을 누른다.
        - ☆: 친구 리사이클러뷰를 띄운다.
        - 빨강 1: 친구 프로필 이미지 → 서버에 이미지 요청 → 받아 띄우기. 예외처리.
        - 빨강 2: 친구 별명 텍스트 → 이하동문
        - 빨강 3: 친구 상태 메시지 → 이하동문
    - 라이브러리 정리
        - **남색 1:** `Toolbar` 또는 `MaterialToolbar`를 XML에서 투명 배경(`background="@android:color/transparent"`)으로 설정.
        - **남색 2:** `RecyclerView.Adapter`에서 기존 친구 프로필 아이템 레이아웃 재사용 + `layout_height`만 커스터마이징.
        - **남색 3:** Retrofit/OkHttp로 이미지 메타데이터 요청 후 Glide/Picasso로 썸네일과 원본 이미지 비동기 로딩 및 표시.
        - **남색 4:** `ExpandableListView` 또는 `MaterialExpansionPanel` 라이브러리 사용해 아코디언 메뉴 구현, 마지막 항목에 친구 `RecyclerView` 삽입.
        - **하늘 1:** `Fragment.getResources().getString()` + `TextView.setTextSize()` + `strings.xml` 다국어 리소스 활용.
        - **하늘 2:** `Button.setOnClickListener()`에서 `FragmentTransaction`으로 검색 오버레이 `Fragment` 띄우기.
        - **하늘 3:** 친구 추가 버튼 `setOnClickListener()` → 친구 추가 오버레이 `Fragment` 또는 `DialogFragment` 호출.
        - **하늘 4:** `Settings.canDrawOverlays(context)` 체크 후 권한 없으면 `Intent`로 권한 설정 화면 띄우기 + 카카오뮤직 연동용 Intent/SDK 호출.
        - **하늘 5:** 설정 버튼 클릭 리스너에서 `OverlayFragment` 또는 일반 `Fragment` 전환 관리 (`FragmentManager.beginTransaction()`).
        - **하늘 6:** 프로필 이미지 `ImageView`에 `setOnClickListener()` → 프로필 Overlay `Fragment` 띄우기.
        - **하늘 7:** ViewModel에서 서버 API 호출 후 `LiveData`로 별명/상태 메시지 받아 `TextView`에 바인딩 + 에러 시 기본 텍스트 표시.
        - **하늘 8:** 멀티프로필 전환 버튼 클릭 → Overlay `Fragment` 호출 또는 프로필 변경 API 호출 후 UI 갱신.
        - **초록 1~4:** `MaterialExpansionPanel` 또는 `ExpandableListView`로 아코디언 메뉴 구현.
        - **초록 5:** 접는 버튼은 이미지뷰(`ImageView`)에 클릭 리스너 달아 접기/펼치기 토글 구현.
        - **☆(친구 리사이클러뷰):** `RecyclerView` + `ListAdapter` + DiffUtil로 친구 목록 표시.
        - **빨강 1:** Glide/Picasso로 친구 프로필 이미지 서버 URL 비동기 로드 + `RequestListener`로 에러 처리.
        - **빨강 2:** 서버 API Retrofit 호출 후 별명 `TextView`에 반영.
        - **빨강 3:** 서버 API 호출해 상태 메시지 받아 UI `TextView`에 업데이트 및 예외 처리
- 서버
    
    ## 📌 친구 목록 / 세부 정보 API 설계 시 추가로 넣을 만한 필드들
    
    ### **1. 공통(모든 API에 가능하면 포함)**
    
    | 필드명 | 설명 | 이유 |
    | --- | --- | --- |
    | `request_user_id` | 요청하는 사용자 ID | 서버에서 “내가 이 친구를 볼 권한이 있는지” 판단 |
    | `auth_token` | 로그인 토큰(JWT 등) | 인증/보안 필수 |
    | `timestamp` | 요청 시각(UTC) | 서버-클라이언트 간 동기화 문제 확인 |
    | `app_version` | 앱 버전 | 버전별 API 응답 분기 가능 |
    - **남색 1:** ----
    - **남색 2:** ----
    - **남색 3:** 서버에서 광고/알림 이미지 목록 API 제공 (썸네일 URL, 원본 URL, 용량 정보 포함).
        - 요청/응답 데이터
        - ***남색 3 필드 설명***
            
            ### 1. 요청(Request) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `auth_token` | 사용자가 인증되었음을 증명하는 토큰 | 유효한 토큰이어야 요청이 허용됨 |
            | `device_id` | 요청하는 사용자의 기기 식별자 | 기기별 맞춤형 이미지 제공 가능 |
            | `locale` | 사용자의 언어 및 지역 설정 (예: "ko-KR", "en-US") | 언어별 맞춤 광고 및 알림 제공에 사용 |
            
            ### 2. 응답(Response) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `thumbnail_url` | 용량이 작은 축소판 이미지 URL | 빠른 로딩을 위해 UI에 먼저 표시 |
            | `original_url` | 고해상도 원본 이미지 URL | 사용자가 클릭하거나 상세화면에서 보여줄 때 사용 |
            | `file_size` | 이미지 파일 용량 (바이트 단위) | 용량 체크 및 네트워크 상황에 따른 로딩 제어용 |
            | `image_id` | 이미지 고유 식별자 | 이미지 업데이트 및 캐시 관리에 사용 |
            | `cache_ttl` | 클라이언트가 이 데이터를 캐시할 수 있는 시간(초) | 기간이 지나면 다시 서버에서 최신 데이터 요청 권장 |
            | `last_updated` | 이미지가 마지막으로 수정된 타임스탬프(UTC ISO 8601 등) | 변경 여부 확인용, `cache_ttl`와 함께 데이터 신선도 판단 |
            
            ---
            
            ### 추가 설명
            
            - **`auth_token` 검증**: 이 API는 사용자 인증이 필요하므로, 서버에서 토큰 유효성 검사를 반드시 해야 합니다.
            - **`device_id` 활용**: 광고 이미지가 기기 종류(모바일, 태블릿 등)나 운영체제(iOS, Android)에 따라 다르게 제공될 수 있으니 이를 구분하는 데 쓰입니다.
            - **`locale` 활용**: 지역 및 언어별로 다른 광고나 알림 이미지를 제공하기 위한 필드입니다.
            - **`cache_ttl`과 `last_updated`**: 클라이언트에서 자주 이미지를 재요청하지 않도록 하면서도 최신 상태를 유지하기 위한 캐시 전략의 핵심입니다.
            - **`image_id`**: 서버가 이미지 업데이트 시, 클라이언트가 이전 버전과 다른 새 이미지인지 쉽게 판단할 수 있게 돕습니다.
    - **남색 4:** ----
    
    - **하늘 1:** ----
    - **하늘 2:** ----
    - **하늘 3:** 친구 추가 API (친구 ID, 닉네임, 프로필 이미지 등 등록).
        - 요청/응답 데이터
        - ***하늘 3 필드 설명***
            
            ### 1. 요청(Request) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `request_user_id` | 친구 추가 요청을 보낸 사용자(본인)의 고유 식별자 | 서버에서 인증된 사용자 ID와 일치해야 함 |
            | `auth_token` | 사용자 인증용 토큰 | 유효한 토큰이어야 요청 허용 |
            | `timestamp` | 요청이 발생한 시각 (UTC ISO 8601 등) | 중복 요청 방지 및 로그 기록용 |
            | `friend_id` | 추가하려는 친구의 고유 식별자 | 상대방이 서비스 내 존재하는 유효한 사용자여야 함 |
            | `nickname` | 추가하려는 친구의 별명 (옵션, 서버에서 최신 정보로 덮어쓸 수 있음) | 클라이언트 표시용, 서버에서 재검증 가능 |
            | `profile_image_url` | 추가하려는 친구 프로필 이미지 URL (옵션) | 클라이언트 표시용, 서버 저장 시 검증 필요 |
            
            ---
            
            ### 2. 응답(Response) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `friend_id` | 서버에 등록된 친구의 고유 식별자 (Primary Key) | 친구 추가 성공 시 반환 |
            | `created_at` | 친구 추가가 완료된 시각 (UTC ISO 8601 등) | 친구 관계 생성 시간 기록 |
            | `status` | 요청 처리 결과 상태 코드 또는 메시지 | 예: `"success"`, `"already_friends"`, `"user_not_found"`, `"error"` 등 |
            
            ---
            
            ### 추가 설명
            
            - **`request_user_id`와 `auth_token`**: 요청자가 실제 로그인된 사용자임을 확인하고, 권한이 있는지 검증합니다.
            - **`timestamp`**: 중복으로 같은 친구 추가 요청이 반복되는 것을 막고, 문제 발생 시 로그 추적에 사용됩니다.
            - **`friend_id`**: 친구로 추가할 대상의 고유 식별자로, 서버 내 존재 여부를 반드시 확인합니다.
            - **`nickname` 및 `profile_image_url`**: 클라이언트가 화면에 보여주기 위해 임시로 보낼 수 있지만, 최종 데이터는 서버 DB의 최신 정보로 관리하는 게 일반적입니다.
            - **응답의 `status` 필드**: 친구 추가 성공 여부와 문제 발생 상황을 명확하게 구분해 클라이언트가 적절히 대응하도록 돕습니다.
    - **하늘 4:** ----
    - **하늘 5:** ----
    - **하늘 6:** ----
    - **하늘 7:** 사용자 별명·상태 메시지 조회 API, 에러 발생 시 기본값 반환 로직 포함.
        - 요청/응답 데이터
        - ***하늘 7 필드 설명***
            
            ### 1. 요청(Request) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `request_user_id` | 요청을 보내는 사용자(본인)의 고유 식별자 | 서버에서 인증된 사용자 ID와 일치해야 함 |
            | `auth_token` | 사용자 인증용 토큰 | 유효한 토큰이어야 요청 허용 |
            | `profile_version` | 클라이언트가 가지고 있는 프로필 정보 버전 번호 | 서버와 클라이언트 간 데이터 최신화 판단용 |
            | `target_user_id` | 별명·상태 메시지를 조회하려는 대상 사용자 ID (본인 또는 친구) | 서버가 조회 권한 확인 후 데이터 제공 |
            
            ---
            
            ### 2. 응답(Response) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `nickname` | 조회 대상 사용자의 별명 | 클라이언트 UI 표시용 |
            | `status_message` | 조회 대상 사용자의 상태 메시지 | 상태 메시지가 없을 경우 빈 문자열 또는 기본 메시지 반환 가능 |
            | `last_updated` | 프로필 정보가 마지막으로 변경된 시각 (UTC ISO 8601) | 클라이언트가 캐시 유효성 판단에 사용 |
            | `privacy_level` | 공개 범위 설정 (예: `public`, `friends_only`, `private`) | 사용자가 설정한 별명/상태 메시지 공개 범위를 나타냄 |
            | `error_code` | (옵션) 오류 코드 | 권한 없음, 사용자 없음 등의 에러 상황 구분 |
            | `error_message` | (옵션) 에러 상세 메시지 | 클라이언트 디버깅 및 사용자 알림용 |
            
            ---
            
            ### 추가 설명
            
            - **`profile_version`**: 클라이언트가 이미 최신 버전을 가지고 있다면, 서버는 변경된 정보가 없음을 알려 불필요한 데이터 전송을 줄일 수 있습니다.
            - **`target_user_id`**: 친구 또는 본인의 별명·상태 메시지를 조회할 수 있으므로, 권한 검증이 반드시 필요합니다.
            - **`privacy_level`**: 사용자가 상태 메시지나 별명을 공개 범위에 따라 제한했을 때, 이에 맞게 데이터 노출 여부를 조절합니다.
            - **`error_code`와 `error_message`**: 요청 실패 시 클라이언트가 적절한 조치를 취할 수 있도록 표준화된 응답을 제공합니다.
    - **하늘 8:** 멀티프로필 전환 API (현재 프로필 ID → 다른 프로필 ID로 변경).
        - 요청/응답 데이터
        - ***하늘 8 필드 설명***
            
            ### 1. 요청(Request) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `request_user_id` | 전환 요청을 하는 사용자(본인)의 고유 식별자 | 서버에서 인증된 사용자 ID와 일치해야 함 |
            | `auth_token` | 사용자 인증용 토큰 | 유효한 토큰이어야 요청 허용 |
            | `target_profile_id` | 사용자가 전환하고자 하는 프로필의 고유 식별자 | 서버에 등록된 프로필 ID여야 하며 권한 체크 필요 |
            
            ---
            
            ### 2. 응답(Response) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `current_profile_id` | 현재 활성화된 프로필 ID | 전환 성공 시 사용자의 현재 프로필 정보 |
            | `last_switched` | 프로필이 마지막으로 전환된 시각 (UTC ISO 8601 등) | 프로필 전환 이력 기록 및 동기화에 활용 |
            | `status` | 요청 처리 결과 상태 코드 또는 메시지 | 예: `"success"`, `"invalid_profile"`, `"unauthorized"` 등 |
    - **초록 1:** ----
    - **초록 2:** ----
    - **초록 3:** ----
    - **초록 4:** ----
    - **초록 5:** ----
    
    - **☆(친구 리사이클러뷰):** 친구 목록 조회 API (프로필 이미지 URL, 별명, 상태 메시지 포함).
        - 요청/응답 데이터
        - ***친구 리사이클러뷰 필드 설명***
            
            ### 1. 요청(Request) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `request_user_id` | 친구 목록을 요청하는 사용자(본인)의 고유 식별자 | 서버에서 인증된 사용자 ID와 일치해야 함 |
            | `auth_token` | 사용자 인증용 토큰 | 유효한 토큰이어야 요청 허용 |
            | `page` | 요청할 친구 목록의 페이지 번호 | 페이징 처리를 위한 필수 값, 1부터 시작하는 양의 정수 |
            | `limit` | 한 페이지에 반환할 친구 수 | 네트워크 부하 및 UI 처리 최적화를 위한 제한값 |
            
            ---
            
            ### 2. 응답(Response) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `friend_id` | 친구 고유 식별자 | 각 친구를 고유하게 식별하는 값 |
            | `profile_image_url` | 친구 프로필 이미지 URL | UI 표시용 |
            | `nickname` | 친구 별명 | UI 표시용 |
            | `status_message` | 친구 상태 메시지 | 상태 메시지가 없으면 빈 문자열일 수 있음 |
            | `profile_version` | 친구 프로필 정보 버전 번호 | 데이터 변경 시 증가, 캐싱 및 동기화 판단용 |
            | `relationship_status` | 친구 관계 상태 | 예: `"friend"`, `"blocked"`, `"pending"` 등 |
            | `last_online` | 친구의 마지막 온라인 시각 (UTC ISO 8601) | 온라인 상태 표시 및 최근 활동 판단에 사용 |
            
            ---
            
            ### 추가 설명
            
            - **페이징(`page`, `limit`)**: 친구가 많을 때 한 번에 모두 가져오면 과부하가 생길 수 있어 페이지 단위로 나눠서 요청합니다.
            - **`profile_version`**: 클라이언트가 프로필 변경 여부를 판단해 불필요한 UI 갱신을 줄입니다.
            - **`relationship_status`**: 친구, 차단, 친구 요청 대기 등 상태에 따라 UI 표시나 기능 제한이 달라질 수 있습니다.
            - **`last_online`**: 온라인 여부나 최근 활동을 표시해 사용자 경험을 높입니다.
        
    - **빨강 1:** 친구 프로필 이미지 조회 API (URL 또는 Base64, 예외 시 기본 이미지 제공).
        - 요청/응답 데이터
        - ***빨강 1 필드 설명***
            
            ### 1. 요청(Request) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `request_user_id` | 프로필 이미지를 요청하는 사용자(본인)의 고유 식별자 | 서버에서 인증된 사용자 ID와 일치해야 함 |
            | `auth_token` | 사용자 인증용 토큰 | 유효한 토큰이어야 요청 허용 |
            | `friend_id` | 프로필 이미지를 조회할 친구의 고유 식별자 | 존재하는 친구여야 하며, 권한 확인 필요 |
            | `profile_version` | 클라이언트가 가지고 있는 프로필 이미지 버전 번호 | 캐시 유효성 판단용; 서버가 최신 이미지 여부 판단 |
            
            ---
            
            ### 2. 응답(Response) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `profile_image_url` | 친구 프로필 이미지의 URL | 클라이언트가 이미지를 로드하는 데 사용 |
            | `last_updated` | 프로필 이미지가 마지막으로 변경된 시각 (UTC ISO 8601) | 클라이언트가 캐시 만료 여부 판단에 사용 |
            | `default_image_url` | (옵션) 기본 프로필 이미지 URL | 친구 이미지가 없거나 오류 시 사용 |
            | `status` | 요청 처리 상태 코드 또는 메시지 | 예: `"success"`, `"not_found"`, `"unauthorized"` 등 |
            
            ---
            
            ### 추가 설명
            
            - **`profile_version`**: 클라이언트가 서버에 가지고 있는 이미지 버전을 알려줘서, 서버는 새 버전이 있을 때만 이미지를 보내 불필요한 트래픽을 줄일 수 있습니다.
            - **`default_image_url`**: 친구가 프로필 이미지를 설정하지 않았거나, 이미지 로드에 실패할 경우 사용할 기본 이미지 URL을 제공합니다.
            - **권한 확인**: 친구 관계가 아니거나 차단된 경우, 이미지 제공을 제한할 수 있습니다.
            - **`last_updated`**: 클라이언트가 캐시된 이미지가 최신인지 판단하는 데 활용합니다.
    - **빨강 2:** 친구 별명 조회 API.
        - 요청/응답 데이터
        - ***빨강 2 필드 설명***
            
            ### 1. 요청(Request) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `request_user_id` | 별명을 조회하는 사용자(본인)의 고유 식별자 | 서버에서 인증된 사용자 ID와 일치해야 함 |
            | `auth_token` | 사용자 인증용 토큰 | 유효한 토큰이어야 요청 허용 |
            | `friend_id` | 별명을 조회할 친구의 고유 식별자 | 존재하는 친구여야 하며 권한 확인 필요 |
            | `profile_version` | 클라이언트가 가지고 있는 별명 정보 버전 번호 | 캐시 유효성 판단용; 서버가 최신 별명 여부 판단 |
            
            ---
            
            ### 2. 응답(Response) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `nickname` | 친구의 별명 | UI 표시용 |
            | `last_updated` | 별명이 마지막으로 변경된 시각 (UTC ISO 8601 형식) | 클라이언트가 캐시 만료 여부 판단에 사용 |
            | `status` | 요청 처리 상태 코드 또는 메시지 | 예: `"success"`, `"not_found"`, `"unauthorized"` 등 |
            
            ---
            
            ### 추가 설명
            
            - **`profile_version`**: 클라이언트가 가지고 있는 별명 데이터 버전을 서버에 알려줘서, 최신 버전이 아니면 새 별명을 응답하고, 최신이면 데이터 전송을 최소화합니다.
            - **권한 검사**: 친구 관계인지, 차단 상태인지 등을 확인하여 적절한 별명 정보를 제공하거나 제한합니다.
            - **`last_updated`**: 별명 변경 시점을 기록하여 클라이언트가 캐시 유효성을 판단하도록 돕습니다.
    - **빨강 3:** 친구 상태 메시지 조회 API.
        - 요청/응답 데이터
        - ***빨강 3 필드 설명***
            
            ### 1. 요청(Request) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `request_user_id` | 상태 메시지를 조회하는 사용자(본인)의 고유 식별자 | 서버에서 인증된 사용자 ID와 일치해야 함 |
            | `auth_token` | 사용자 인증용 토큰 | 유효한 토큰이어야 요청 허용 |
            | `friend_id` | 상태 메시지를 조회할 친구의 고유 식별자 | 존재하는 친구여야 하며 권한 확인 필요 |
            | `profile_version` | 클라이언트가 가지고 있는 상태 메시지 버전 번호 | 캐시 유효성 판단용; 서버가 최신 상태 메시지 판단 |
            
            ---
            
            ### 2. 응답(Response) 데이터
            
            | 필드명 | 의미 및 용도 | 상태/설명 |
            | --- | --- | --- |
            | `status_message` | 친구의 상태 메시지 | 상태 메시지가 없으면 빈 문자열 또는 기본 메시지 반환 가능 |
            | `last_updated` | 상태 메시지가 마지막으로 변경된 시각 (UTC ISO 8601 형식) | 클라이언트가 캐시 만료 여부 판단에 사용 |
            | `status` | 요청 처리 상태 코드 또는 메시지 | 예: `"success"`, `"not_found"`, `"unauthorized"` 등 |
            
            ---
            
            ### 추가 설명
            
            - **`profile_version`**: 클라이언트가 가지고 있는 상태 메시지 버전을 서버에 알려줘서, 최신이 아니면 새로운 메시지를 응답하고 최신이면 데이터 전송 최소화합니다.
            - **권한 검사**: 친구 관계, 차단 상태 등을 확인하여 상태 메시지 제공 여부를 결정합니다.
            - **`last_updated`**: 상태 메시지 변경 시점을 기록해 클라이언트가 캐시 유효성을 판단하도록 돕습니다.
            - **`status_message` 빈 값 처리**: 상태 메시지가 없을 경우 기본 메시지로 대체하거나 빈 문자열 반환하도록 서버에서 일관된 정책이 필요합니다.
